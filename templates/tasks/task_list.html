<h1>Welcome to TicketyDo üïê</h1>

{% extends "base.html" %}

{% load task_extras %}

{% block content %}
  <h2>Your Tasks</h2>
  <ul>
  {% for task in tasks %}
    <li>
      <strong>{{ task.title }}</strong>
      {% if task.completed %}
        ‚úÖ
      {% endif %}

    <!-- Timer Display -->
    {% if active_sessions|get_item:task.id %}
        {% with session=active_sessions|get_item:task.id %}
            <div>
                Timer running for:
                {{ session.start_time|timesince }}
            </div>
            <form method="post" action="{% url 'task-stop-timer' task.id %}">
                {% csrf_token %}
                <button type="submit">‚èπ Stop Timer</button>
            </form>
            
        {% endwith %}
    {% else %}
        <form method="post" action="{% url 'task-start-timer' task.id %}">
          {% csrf_token %}
          <button type="submit">‚ñ∂ Start Timer</button>
        </form>
    {% endif %}
    {% if task.total_duration %}
        <small>Total Duration: {{ task.total_duration|duration }} total</small>
    {% else %}
        <small>No time tracked yet</small>
    {% endif %}
    </li>
  {% endfor %}
</ul>
{% endblock %}


<h1>Welcome to TicketyDo ‚èê‚è±Ô∏è</h1>
<p>This is where time-boxed tasks live.</p>

